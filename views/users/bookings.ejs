<% layout("/layouts/userBoilerplate") %>

    <div class="container mt-4">
        <h1>Your Bookings</h1>
        <div class="row">
            <% if (bookings.length> 0) { %>
                <% bookings.forEach(booking=> { %>
                    <div class="col-md-4">
                        <div class="card mb-3">
                            <% if (booking.resort.id && booking.resort.id.image) { %>
                                <img src="<%= booking.resort.id.image.url %>" class="card-img-top" alt="Resort Image">
                                <% } else { %>
                                    <img src="/default-image.jpg" class="card-img-top" alt="Default Image">
                                    <% } %>
                                        <div class="card-body">
                                            <h5 class="card-title"> <%= booking.resort.name %></h5>
                                            <p class="card-text">Price: â‚¹<%= booking.resort.price %></p>
                                            <p class="card-text">Check-in: <%= booking.checkIn.toDateString() %></p>
                                            <p class="card-text">Check-out: <%= booking.checkOut.toDateString() %></p>
                                            <p class="card-text">People: <%= booking.people %></p>
                                            <p class="card-text">Rooms: <%= booking.rooms %></p>
                                            <p class="card-text">Room Type: <%= booking.roomType %> </p>
                                            <p class="card-text"><small class="text-muted">Booked on <%= booking.createdAt.toDateString() %></small></p>
                                        </div>

                                        <!-- Cancel Booking Button -->
                                        <form action="/bookings/<%= booking._id %>?_method=DELETE" method="POST">
                                            <button type="submit" class="btn btn-danger">Cancel Booking</button>
                                        </form>

                        </div>
                    </div>
                    <% }); %>
                        <% } else { %>
                            <p class="text-center">You have no bookings yet!</p>
                            <% } %>
        </div>
    </div>
